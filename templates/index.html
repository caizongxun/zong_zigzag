<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZigZag ÂØ¶ÊôÇÈ†êÊ∏¨ - AI ‰∫§Êòì‰ø°Ëôü</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            padding: 20px;
            color: #e2e8f0;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 0.6s ease-out;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1em;
            color: #94a3b8;
            letter-spacing: 0.5px;
        }

        .tab-navigation {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            border-bottom: 2px solid #334155;
            animation: fadeInDown 0.6s ease-out;
        }

        .tab-button {
            padding: 14px 24px;
            background: transparent;
            border: none;
            color: #94a3b8;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 3px solid transparent;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tab-button:hover {
            color: #cbd5e1;
        }

        .tab-button.active {
            color: #00d4ff;
            border-bottom-color: #00d4ff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeInUp 0.3s ease-out;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.6s ease-out;
            backdrop-filter: blur(10px);
        }

        .card:hover {
            transform: translateY(-8px);
            border-color: #475569;
            box-shadow: 0 20px 50px rgba(0, 212, 255, 0.1);
        }

        .card h2 {
            font-size: 1.4em;
            margin-bottom: 24px;
            color: #00d4ff;
            border-bottom: 2px solid #334155;
            padding-bottom: 12px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .config-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        select, input {
            padding: 12px 14px;
            background: #0f172a;
            border: 1.5px solid #334155;
            border-radius: 10px;
            font-size: 1em;
            color: #e2e8f0;
            transition: all 0.3s;
            font-family: inherit;
        }

        select:hover, input:hover {
            border-color: #475569;
            background: #1e293b;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
            background: #0f172a;
        }

        select option {
            background: #1e293b;
            color: #e2e8f0;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 14px 20px;
            border: none;
            border-radius: 10px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transition: left 0.3s;
            z-index: -1;
        }

        button:hover::before {
            left: 100%;
        }

        .btn-predict {
            background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
            color: #0f172a;
            font-weight: 700;
        }

        .btn-predict:hover {
            transform: scale(1.02);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
        }

        .btn-predict:active {
            transform: scale(0.98);
        }

        .btn-start {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .btn-start:hover {
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        .btn-stop {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .btn-stop:hover {
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }

        .btn-refresh {
            background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
            color: white;
        }

        .btn-refresh:hover {
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.3);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status-badge {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-top: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.ok {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid #10b981;
        }

        .status-badge.loading {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            border: 1px solid #00d4ff;
            animation: pulse 1.5s infinite;
        }

        .status-badge.error {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .prediction-display {
            text-align: center;
        }

        .signal-badge {
            font-size: 3em;
            font-weight: 700;
            padding: 40px 50px;
            border-radius: 16px;
            margin: 30px 0;
            display: inline-block;
            min-width: 250px;
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 1px;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .signal-badge.HH {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .signal-badge.HL {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .signal-badge.LH {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .signal-badge.LL {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }

        .signal-badge.HOLD {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #0f172a;
        }

        .signal-animation {
            animation: signalPulse 0.6s ease-out;
        }

        @keyframes signalPulse {
            0% {
                transform: scale(1);
                opacity: 0.5;
            }
            50% {
                transform: scale(1.08);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .confidence-meter {
            margin: 30px 0;
        }

        .confidence-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-weight: 600;
            color: #cbd5e1;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 0.5px;
        }

        .confidence-bar {
            width: 100%;
            height: 30px;
            background: #0f172a;
            border-radius: 12px;
            overflow: hidden;
            border: 1.5px solid #334155;
            position: relative;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff 0%, #0099ff 100%);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 0.9em;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 24px;
        }

        .data-item {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 18px;
            border-radius: 12px;
            border: 1px solid #334155;
            border-left: 3px solid #00d4ff;
            transition: all 0.3s;
        }

        .data-item:hover {
            border-color: #475569;
            transform: translateY(-2px);
        }

        .data-item label {
            display: block;
            font-size: 0.8em;
            color: #64748b;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-item .value {
            font-size: 1.4em;
            font-weight: 700;
            color: #00d4ff;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.5px;
        }

        .probabilities {
            margin-top: 28px;
            padding-top: 28px;
            border-top: 1px solid #334155;
        }

        .probabilities h3 {
            margin-bottom: 16px;
            color: #cbd5e1;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .prob-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 0.95em;
            border-left: 3px solid #00d4ff;
            transition: all 0.3s;
        }

        .prob-item:hover {
            border-color: #00ff88;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }

        .prob-item .label {
            font-weight: 700;
            color: #cbd5e1;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .prob-item .percentage {
            font-weight: 700;
            color: #00d4ff;
            font-family: 'Courier New', monospace;
            letter-spacing: 0.5px;
        }

        .timestamp {
            font-size: 0.85em;
            color: #64748b;
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #334155;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            padding: 16px;
            border-radius: 10px;
            margin-top: 16px;
            border-left: 4px solid #ef4444;
            border: 1px solid #ef4444;
            animation: shake 0.3s ease-in-out;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            padding: 16px;
            border-radius: 10px;
            margin-top: 16px;
            border-left: 4px solid #10b981;
            border: 1px solid #10b981;
            animation: fadeInUp 0.3s ease-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ÊâÄÊúâÂπ£Á®ÆÁãÄÊÖãË°®Ê†ºÊ®£Âºè */
        .coins-table {
            width: 100%;
            border-collapse: collapse;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .coins-table thead {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-bottom: 2px solid #334155;
        }

        .coins-table th {
            padding: 16px;
            text-align: left;
            font-weight: 600;
            color: #00d4ff;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }

        .coins-table tbody tr {
            border-bottom: 1px solid #334155;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .coins-table tbody tr:hover {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            transform: scale(1.01);
        }

        .coins-table td {
            padding: 16px;
            color: #cbd5e1;
            font-size: 0.95em;
        }

        .coin-name {
            font-weight: 600;
            color: #e2e8f0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .signal-cell {
            font-weight: 700;
            text-align: center;
            padding: 8px 12px;
            border-radius: 8px;
            width: fit-content;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .signal-cell.HH {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .signal-cell.HL {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .signal-cell.LH {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .signal-cell.LL {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .signal-cell.HOLD {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #0f172a;
        }

        .signal-cell.LOADING {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            animation: pulse 1.5s infinite;
        }

        .confidence-cell {
            font-weight: 600;
            color: #00d4ff;
            font-family: 'Courier New', monospace;
        }

        .coins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .coin-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .coin-card:hover {
            border-color: #00d4ff;
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 212, 255, 0.2);
        }

        .coin-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .coin-card-name {
            font-weight: 700;
            color: #e2e8f0;
            font-size: 1.1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .coin-card-signal {
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .coin-card-signal.HH {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .coin-card-signal.HL {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .coin-card-signal.LH {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .coin-card-signal.LL {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .coin-card-signal.HOLD {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: #0f172a;
        }

        .coin-card-signal.LOADING {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            animation: pulse 1.5s infinite;
        }

        .coin-card-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            font-size: 0.85em;
        }

        .coin-card-item {
            background: rgba(0, 212, 255, 0.05);
            padding: 8px;
            border-radius: 6px;
            border-left: 2px solid #00d4ff;
        }

        .coin-card-item-label {
            color: #64748b;
            font-size: 0.75em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .coin-card-item-value {
            color: #00d4ff;
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }

        .loading-container {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }

        .loading-spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #334155;
            border-top: 4px solid #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 16px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 1200px) {
            .data-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .coins-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .config-section {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }

            .data-grid {
                grid-template-columns: 1fr;
            }

            .button-group {
                flex-direction: column;
            }

            .signal-badge {
                font-size: 2em;
                padding: 25px 35px;
                min-width: auto;
            }

            .tab-navigation {
                flex-wrap: wrap;
            }

            .coins-grid {
                grid-template-columns: 1fr;
            }
        }

        .hidden {
            display: none !important;
        }

        /* ÊªëÂπ≥ÊéÉÂãï‰æãÂºè */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- È†Å‰∏Ä -->
        <div class="header">
            <h1>‚ö° ZigZag ÂØ¶ÊôÇÈ†êÊ∏¨</h1>
            <p>‰∏Ä AI È©ÖÂãïÁöÑÂä†ÂØÜË≤®Âπ£‰∫§Êòì‰ø°ËôüÁ≥ªÁµ±</p>
        </div>

        <!-- Tab Â∞éËà™ -->
        <div class="tab-navigation">
            <button class="tab-button active" onclick="switchTab('single-coin')">üîÆ ÂñÆÂπ£Á®ÆÈ†êÊ∏¨</button>
            <button class="tab-button" onclick="switchTab('all-coins')">üìä ÂÖ®Âπ£Á®ÆÁãÄÊÖã</button>
        </div>

        <!-- Tab 1: ÂñÆÂπ£Á®ÆÈ†êÊ∏¨ -->
        <div id="single-coin" class="tab-content active">
            <!-- ‰∏ªË¶ÅÁΩëÊ†º -->
            <div class="main-grid">
                <!-- ÈÖçÁΩÆÂç°Áâá -->
                <div class="card">
                    <h2>‚õî ‰∫§ÊòìÈÖçÁΩÆ</h2>
                    <div class="config-section">
                        <div class="form-group">
                            <label>‰∫§ÊòìÂ∞ç</label>
                            <select id="pair">
                                <option value="AAVEUSDT">Aave (AAVE)</option>
                                <option value="ADAUSDT">Cardano (ADA)</option>
                                <option value="ALGOUSDT">Algorand (ALGO)</option>
                                <option value="ARBUSDT">Arbitrum (ARB)</option>
                                <option value="ATOMUSDT">Cosmos (ATOM)</option>
                                <option value="AVAXUSDT">Avalanche (AVAX)</option>
                                <option value="BCHUSDT">Bitcoin Cash (BCH)</option>
                                <option value="BNBUSDT">Binance Coin (BNB)</option>
                                <option value="BTCUSDT" selected>Bitcoin (BTC)</option>
                                <option value="DOGEUSDT">Dogecoin (DOGE)</option>
                                <option value="DOTUSDT">Polkadot (DOT)</option>
                                <option value="ETCUSDT">Ethereum Classic (ETC)</option>
                                <option value="ETHUSDT">Ethereum (ETH)</option>
                                <option value="FILUSDT">Filecoin (FIL)</option>
                                <option value="LINKUSDT">Chainlink (LINK)</option>
                                <option value="LTCUSDT">Litecoin (LTC)</option>
                                <option value="MATICUSDT">Polygon (MATIC)</option>
                                <option value="NEARUSDT">NEAR Protocol (NEAR)</option>
                                <option value="OPUSDT">Optimism (OP)</option>
                                <option value="SOLUSDT">Solana (SOL)</option>
                                <option value="UNIUSDT">Uniswap (UNI)</option>
                                <option value="XRPUSDT">XRP</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ÊôÇÈñìÊ°ÜÊû∂</label>
                            <select id="interval">
                                <option value="15m" selected>15 ÂàÜÈêò</option>
                                <option value="1h">1 Â∞èÊôÇ</option>
                            </select>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn-predict" onclick="predictNow()">üîÆ È†êÊ∏¨‰∏ÄÊ¨°</button>
                        <button class="btn-start" onclick="startAutoUpdate()">‚ñ∂ Ëá™ÂãïÊõ¥Êñ∞</button>
                        <button class="btn-stop" onclick="stopAutoUpdate()">‚èπ ÂÅúÊ≠¢</button>
                    </div>

                    <div id="statusMessage"></div>
                </div>

                <!-- Á≥ªÁµ±ÁãÄÊÖãÂç°Áâá -->
                <div class="card">
                    <h2>‚ö† Á≥ªÁµ±ÁãÄÊÖã</h2>
                    <div class="data-grid" style="grid-template-columns: 1fr 1fr;">
                        <div class="data-item">
                            <label>Ê®°ÂºèÁãÄÊÖã</label>
                            <div class="value" id="modelStatus">‚úç Âä†Ëºâ‰∏≠...</div>
                        </div>
                        <div class="data-item">
                            <label>‰∏äÊ¨°Êõ¥Êñ∞</label>
                            <div class="value" id="lastUpdate">--:--:--</div>
                        </div>
                        <div class="data-item">
                            <label>È†êÊ∏¨Ê¨°Êï∏</label>
                            <div class="value" id="predictionCount">0</div>
                        </div>
                        <div class="data-item">
                            <label>Ëá™ÂãïÊõ¥Êñ∞</label>
                            <div class="value" id="autoUpdateStatus">‚ö† Â∑≤ÂÅúÊ≠¢</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- È†êÊ∏¨ÁµêÊûúÂç°Áâá -->
            <div class="card">
                <h2>‚ú© ÊúÄÊñ∞È†êÊ∏¨ÁµêÊûú</h2>
                <div class="prediction-display">
                    <div id="signalDisplay" class="signal-badge HOLD">‚ö† HOLD</div>
                    
                    <div class="confidence-meter">
                        <div class="confidence-label">
                            <span>ÁΩÆ‰ø°Â∫¶</span>
                            <span id="confidencePercent">0%</span>
                        </div>
                        <div class="confidence-bar">
                            <div class="confidence-fill" id="confidenceFill" style="width: 0%">
                                <span id="confidenceText">0%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ÂØ¶ÊôÇÊï∏Êìö -->
                <div class="data-grid" id="ohlcvData" style="display: none;">
                    <div class="data-item">
                        <label>ÈñãÁöÄÂÉπ</label>
                        <div class="value" id="openPrice">--</div>
                    </div>
                    <div class="data-item">
                        <label>Êî∂Áõ§ÂÉπ</label>
                        <div class="value" id="closePrice">--</div>
                    </div>
                    <div class="data-item">
                        <label>ÊúÄÈ´òÂÉπ</label>
                        <div class="value" id="highPrice">--</div>
                    </div>
                    <div class="data-item">
                        <label>ÊúÄ‰ΩéÂÉπ</label>
                        <div class="value" id="lowPrice">--</div>
                    </div>
                </div>

                <!-- Ê©üÁéáÂàÜ‰Ωà -->
                <div class="probabilities" id="probabilitiesDisplay" style="display: none;">
                    <h3>üìä Swing Type Ê©üÁéáÂàÜ‰Ωà</h3>
                    <div id="probsList"></div>
                </div>

                <!-- ÊôÇÈñìÊà≥ -->
                <div class="timestamp" id="timestamp"></div>

                <!-- ÊèêÁ§∫Ê∂àÊÅØ -->
                <div id="messageDisplay"></div>
            </div>
        </div>

        <!-- Tab 2: ÂÖ®Âπ£Á®ÆÁãÄÊÖã -->
        <div id="all-coins" class="tab-content">
            <div class="card">
                <h2>üìä ÂÖ®Âπ£Á®ÆÂØ¶ÊôÇÁãÄÊÖã</h2>
                <div style="margin-bottom: 20px;">
                    <button class="btn-refresh" onclick="fetchAllCoinsStatus()" style="width: 200px;">üîÑ Âà∑Êñ∞ÁãÄÊÖã</button>
                    <button class="btn-predict" onclick="predictAllCoins()" style="width: 200px; margin-left: 10px;">‚ö° ÂÖ®Âπ£È†êÊ∏¨</button>
                </div>

                <div id="allCoinsContainer" class="coins-grid">
                    <div class="loading-container">
                        <div class="loading-spinner"></div>
                        <p>Ê≠£Âú®ËºâÂÖ•Âπ£Á®ÆÁãÄÊÖã...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let predictionCount = 0;
        let autoUpdateInterval = null;
        let isAutoUpdating = false;
        let allCoinsData = {};

        // Tab ÂàáÊèõ
        function switchTab(tabName) {
            // Èö±ËóèÊâÄÊúâ tab
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // ÂèñÊ∂àÊøÄÊ¥ªÊâÄÊúâÊåâÈàï
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));

            // È°ØÁ§∫ÈÅ∏‰∏≠ÁöÑ tab ÂíåÊøÄÊ¥ªÊåâÈàï
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Â¶ÇÊûúÊòØÂÖ®Âπ£Á®ÆÈ†ÅÈù¢ÔºåËá™ÂãïËºâÂÖ•
            if (tabName === 'all-coins') {
                fetchAllCoinsStatus();
            }
        }

        // Êõ¥Êñ∞ÊôÇÈñìÊà≥
        function updateTimestamp() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            document.getElementById('lastUpdate').textContent = `${hours}:${minutes}:${seconds}`;
            document.getElementById('timestamp').textContent = `üóí ‰∏äÊ¨°Êõ¥Êñ∞: ${hours}:${minutes}:${seconds}`;
        }

        // Êõ¥Êñ∞È†êÊ∏¨ÁµêÊûú
        function updatePrediction(data) {
            if (!data.data) return;

            const pred = data.data;
            predictionCount++;

            // 1. Êõ¥Êñ∞‰ø°Ëôü
            const signal = pred.main_signal || 'HOLD';
            const signalElement = document.getElementById('signalDisplay');
            
            if (!signalElement.textContent.includes(signal)) {
                signalElement.textContent = signal;
                signalElement.className = `signal-badge ${signal} signal-animation`;
            }

            // 2. Êõ¥Êñ∞ÁΩÆ‰ø°Â∫¶
            const confidence = (pred.confidence * 100).toFixed(1);
            const confidenceText = document.getElementById('confidencePercent');
            if (confidenceText.textContent !== `${confidence}%`) {
                confidenceText.textContent = `${confidence}%`;
            }

            // 3. Êõ¥Êñ∞ÁΩÆ‰ø°Â∫¶Êù°
            const fill = document.getElementById('confidenceFill');
            fill.style.width = `${confidence}%`;
            const fillText = document.getElementById('confidenceText');
            if (fillText.textContent !== `${confidence}%`) {
                fillText.textContent = `${confidence}%`;
            }

            // 4. Êõ¥Êñ∞ OHLCV Êï∏Êìö
            if (pred.ohlcv) {
                document.getElementById('ohlcvData').style.display = 'grid';
                
                const openPrice = pred.ohlcv.open.toFixed(2);
                const openEl = document.getElementById('openPrice');
                if (openEl.textContent !== openPrice) {
                    openEl.textContent = openPrice;
                }

                const closePrice = pred.ohlcv.close.toFixed(2);
                const closeEl = document.getElementById('closePrice');
                if (closeEl.textContent !== closePrice) {
                    closeEl.textContent = closePrice;
                }

                const highPrice = pred.ohlcv.high.toFixed(2);
                const highEl = document.getElementById('highPrice');
                if (highEl.textContent !== highPrice) {
                    highEl.textContent = highPrice;
                }

                const lowPrice = pred.ohlcv.low.toFixed(2);
                const lowEl = document.getElementById('lowPrice');
                if (lowEl.textContent !== lowPrice) {
                    lowEl.textContent = lowPrice;
                }
            }

            // 5. Êõ¥Êñ∞Ê©üÁéá
            if (pred.signal_probabilities) {
                document.getElementById('probabilitiesDisplay').style.display = 'block';
                const probsList = document.getElementById('probsList');
                probsList.innerHTML = '';
                
                for (const [label, prob] of Object.entries(pred.signal_probabilities)) {
                    const probPercent = (prob * 100).toFixed(1);
                    const probItem = document.createElement('div');
                    probItem.className = 'prob-item';
                    probItem.innerHTML = `
                        <span class="label">${label}</span>
                        <span class="percentage">${probPercent}%</span>
                    `;
                    probsList.appendChild(probItem);
                }
            }

            // 6. Êõ¥Êñ∞È†êÊ∏¨Ê¨°Êï∏
            const countEl = document.getElementById('predictionCount');
            if (countEl.textContent !== String(predictionCount)) {
                countEl.textContent = predictionCount;
            }

            // 7. Êõ¥Êñ∞ÊôÇÈñì
            updateTimestamp();
        }

        // È†êÊ∏¨‰∏ÄÊ¨°
        async function predictNow() {
            const pair = document.getElementById('pair').value;
            const interval = document.getElementById('interval').value;
            const messageDiv = document.getElementById('messageDisplay');
            const statusDiv = document.getElementById('statusMessage');

            messageDiv.innerHTML = '<div class="status-badge loading">üîÑ È†êÊ∏¨‰∏≠...</div>';

            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ pair, interval })
                });

                const data = await response.json();

                if (data.status === 'success') {
                    updatePrediction(data);
                    messageDiv.innerHTML = '<div class="success-message">‚úÖ È†êÊ∏¨ÊàêÂäü!</div>';
                    statusDiv.innerHTML = '<div class="status-badge ok">‚ö° ‰ΩúÂãï</div>';
                } else {
                    messageDiv.innerHTML = `<div class="error-message">‚ùå ${data.message}</div>`;
                    statusDiv.innerHTML = '<div class="status-badge error">‚ö† ÈåØË™§</div>';
                }
            } catch (error) {
                messageDiv.innerHTML = `<div class="error-message">‚ùå Á∂≤Ë∑ØÈåØË™§: ${error.message}</div>`;
                statusDiv.innerHTML = '<div class="status-badge error">‚ö† ÈÄ£Êé•Â§±Êïó</div>';
            }
        }

        // ÈñãÂßãËá™ÂãïÊõ¥Êñ∞
        function startAutoUpdate() {
            if (isAutoUpdating) return;

            isAutoUpdating = true;
            document.getElementById('autoUpdateStatus').textContent = '‚ñ∂ Êõ¥Êñ∞‰∏≠';

            // Á¨¨‰∏ÄÊ¨°Á´ãÂç≥È†êÊ∏¨
            predictNow();

            // ÁÑ∂ÂæåÊØè 60 ÁßíÊõ¥Êñ∞‰∏ÄÊ¨°
            autoUpdateInterval = setInterval(() => {
                if (isAutoUpdating) {
                    predictNow();
                }
            }, 60000);
        }

        // ÂÅúÊ≠¢Ëá™ÂãïÊõ¥Êñ∞
        function stopAutoUpdate() {
            isAutoUpdating = false;
            document.getElementById('autoUpdateStatus').textContent = '‚ö† Â∑≤ÂÅúÊ≠¢';

            if (autoUpdateInterval) {
                clearInterval(autoUpdateInterval);
                autoUpdateInterval = null;
            }
        }

        // Áç≤ÂèñÊâÄÊúâÂπ£Á®ÆÁãÄÊÖã
        async function fetchAllCoinsStatus() {
            const container = document.getElementById('allCoinsContainer');
            container.innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><p>Ê≠£Âú®ËºâÂÖ•ÊâÄÊúâÂπ£Á®ÆÁãÄÊÖã...</p></div>';

            try {
                const response = await fetch('/api/all-coins-status');
                const data = await response.json();

                if (data.status === 'success') {
                    renderCoinsGrid(data.data);
                } else {
                    container.innerHTML = `<div class="error-message" style="grid-column: 1/-1;">‚ùå ËºâÂÖ•Â§±Êïó: ${data.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error-message" style="grid-column: 1/-1;">‚ùå Á∂≤Ë∑ØÈåØË™§: ${error.message}</div>`;
            }
        }

        // È†êÊ∏¨ÊâÄÊúâÂπ£Á®Æ
        async function predictAllCoins() {
            const container = document.getElementById('allCoinsContainer');
            container.innerHTML = '<div class="loading-container"><div class="loading-spinner"></div><p>Ê≠£Âú®È†êÊ∏¨ÊâÄÊúâÂπ£Á®Æ...</p></div>';

            try {
                const response = await fetch('/api/predict-all-coins', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({})
                });

                const data = await response.json();

                if (data.status === 'success') {
                    renderCoinsGrid(data.data);
                } else {
                    container.innerHTML = `<div class="error-message" style="grid-column: 1/-1;">‚ùå È†êÊ∏¨Â§±Êïó: ${data.message}</div>`;
                }
            } catch (error) {
                container.innerHTML = `<div class="error-message" style="grid-column: 1/-1;">‚ùå Á∂≤Ë∑ØÈåØË™§: ${error.message}</div>`;
            }
        }

        // Ê∏≤ÊüìÂπ£Á®ÆÁ∂≤Ê†º
        function renderCoinsGrid(coinsData) {
            const container = document.getElementById('allCoinsContainer');
            container.innerHTML = '';

            const entries = Array.isArray(coinsData) ? coinsData : Object.entries(coinsData).map(([pair, data]) => ({ pair, ...data }));

            entries.forEach(item => {
                const pair = item.pair || item[0];
                const data = item.data || item;
                const signal = data.main_signal || 'LOADING';
                const confidence = data.confidence ? (data.confidence * 100).toFixed(1) : '--';

                const card = document.createElement('div');
                card.className = 'coin-card';
                card.innerHTML = `
                    <div class="coin-card-header">
                        <div class="coin-card-name">${pair}</div>
                        <div class="coin-card-signal ${signal}">${signal}</div>
                    </div>
                    <div class="coin-card-info">
                        <div class="coin-card-item">
                            <div class="coin-card-item-label">ÁΩÆ‰ø°Â∫¶</div>
                            <div class="coin-card-item-value">${confidence}%</div>
                        </div>
                        <div class="coin-card-item">
                            <div class="coin-card-item-label">Êî∂Áõ§ÂÉπ</div>
                            <div class="coin-card-item-value">${data.ohlcv ? data.ohlcv.close.toFixed(2) : '--'}</div>
                        </div>
                        <div class="coin-card-item">
                            <div class="coin-card-item-label">ÊúÄÈ´òÂÉπ</div>
                            <div class="coin-card-item-value">${data.ohlcv ? data.ohlcv.high.toFixed(2) : '--'}</div>
                        </div>
                        <div class="coin-card-item">
                            <div class="coin-card-item-label">ÊúÄ‰ΩéÂÉπ</div>
                            <div class="coin-card-item-value">${data.ohlcv ? data.ohlcv.low.toFixed(2) : '--'}</div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // È†ÅÈù¢Âä†ËºâÊôÇÂàùÂßãÂåñ
        window.onload = () => {
            updateTimestamp();

            // ÊØèÁßíÊõ¥Êñ∞ÊôÇÈñì
            setInterval(updateTimestamp, 1000);

            // Âä†ËºâÊúÄÊñ∞È†êÊ∏¨
            fetch('/api/latest')
                .then(res => res.json())
                .then(data => {
                    if (data.status === 'success') {
                        updatePrediction(data);
                        document.getElementById('statusMessage').innerHTML = '<div class="status-badge ok">‚ö° Â∞±Á∑í</div>';
                    }
                })
                .catch(err => {
                    console.error(err);
                    document.getElementById('statusMessage').innerHTML = '<div class="status-badge error">‚ö† ÈåØË™§</div>';
                });
        };
    </script>
</body>
</html>